(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{18:function(e,t,n){e.exports=n(42)},23:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(16),u=n.n(c),o=(n(23),n(17)),s=n(4),i=n(1),l=n.n(i),f=n(3),m=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Add new contact"),r.a.createElement("form",{onSubmit:e.submit},"name: ",r.a.createElement("input",{value:e.name,onChange:e.nameChange}),r.a.createElement("br",null),"number: ",r.a.createElement("input",{value:e.number,onChange:e.numberChange}),r.a.createElement("button",{type:"submit"},"save")))},p=function(e){return r.a.createElement(r.a.Fragment,null,"filter: ",r.a.createElement("input",{value:e.filter,onChange:e.filterChange}))},b=function(e){var t=function(){return e.onClick(e.person.id,e.person.name)};return r.a.createElement("div",null,e.person.name," ",e.person.number," ",r.a.createElement("button",{onClick:t},"delete"))},d=function(e){var t=e.show;return t.map((function(t){return r.a.createElement(b,{key:t.id,person:t,onClick:e.delFunc})}))},h=function(e){var t=e.type,n=e.message;Object(a.useEffect)((function(){var e=document.querySelector(".notification");setTimeout((function(){e.id="fade"}),10)}),[]);var c="error"===t?r.a.createElement("h2",null,"Error!"):"warning"===t?r.a.createElement("h2",null,"Alert!"):"success"===t?r.a.createElement("h2",null,"Success!"):r.a.createElement("h2",null,"Notification!");return r.a.createElement("notification",{id:t,className:"notification"},c,r.a.createElement("br",null),n)},v=n(5),E=n.n(v),w="api/persons",x=function(e){return E.a.post(w,e).then((function(e){return e.data}))},j=function(e){return E.a.delete("".concat(w,"/").concat(e)).then((function(e){return e.data}))},O=function(){return E.a.get(w).then((function(e){return e.data}))},g=function(e,t){return E.a.put("".concat(w,"/").concat(e.id),t).then((function(e){return e.data}))},k=function(){Object(a.useEffect)((function(){Object(f.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=i,e.next=3,O();case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})))()}),[]);var e=function(){var e=Object(f.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{type:"success",message:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t=function(){var e=Object(f.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{type:"error",message:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n=Object(a.useState)([]),c=Object(s.a)(n,2),u=c[0],i=c[1],b=Object(a.useState)(""),v=Object(s.a)(b,2),E=v[0],w=v[1],k=Object(a.useState)(""),y=Object(s.a)(k,2),C=y[0],S=y[1],F=Object(a.useState)(""),A=Object(s.a)(F,2),N=A[0],D=A[1],J=Object(a.useState)(!1),T=Object(s.a)(J,2),q=T[0],B=T[1],I=Object(a.useState)({type:"",message:""}),L=Object(s.a)(I,2),M=L[0],P=L[1];Object(a.useEffect)((function(){""!==M.type&&(B(!0),setTimeout((function(){B(!1)}),4300))}),[M]);var U=""===N?u:u.filter((function(e){if(e.name.toLowerCase().includes(N))return e})),z=function(){var t=Object(f.a)(l.a.mark((function t(n,a){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Delete '".concat(a,"' ?"))){t.next=14;break}return t.next=4,j(n);case 4:return t.t0=P,t.next=7,e("".concat(a," deleted!"));case 7:return t.t1=t.sent,(0,t.t0)(t.t1),t.t2=i,t.next=12,O();case 12:t.t3=t.sent,(0,t.t2)(t.t3);case 14:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();return r.a.createElement("div",null,q?r.a.createElement(h,{type:M.type,message:M.message}):r.a.createElement(r.a.Fragment,null),r.a.createElement("h2",null,"Phonebook"),r.a.createElement(p,{filter:N,filterChange:function(e){D(e.target.value)}}),r.a.createElement(m,{submit:function(n){n.preventDefault();var a={name:E,number:C},r=function(){var e,t=Object(o.a)(u);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(a.name===n.name)return!0}}catch(r){t.e(r)}finally{t.f()}return!1};Object(f.a)(l.a.mark((function n(){var c;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!r()){n.next=18;break}if(!window.confirm("Alert! '".concat(a.name,"' is already in puhelinluettelo. \n        Update number?"))){n.next=16;break}c=u.filter((function(e){if(a.name===e.name)return e})),n.prev=5,g(c[0],a).then((function(){return Object(f.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=P,t.next=3,e("".concat(a.name," updated!"));case 3:return t.t1=t.sent,(0,t.t0)(t.t1),t.t2=i,t.next=8,O();case 8:t.t3=t.sent,(0,t.t2)(t.t3);case 10:case"end":return t.stop()}}),t)})))()})).catch((function(e){return Object(f.a)(l.a.mark((function n(){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=P,n.next=3,t("".concat(e.response.data.error));case 3:n.t1=n.sent,(0,n.t0)(n.t1);case 5:case"end":return n.stop()}}),n)})))()})),n.next=16;break;case 9:return n.prev=9,n.t0=n.catch(5),n.t1=P,n.next=14,t("".concat(a.name," already deleted!"));case 14:n.t2=n.sent,(0,n.t1)(n.t2);case 16:n.next=19;break;case 18:x(a).then((function(){return Object(f.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=P,t.next=3,e("".concat(a.name," added!"));case 3:return t.t1=t.sent,(0,t.t0)(t.t1),t.t2=i,t.next=8,O();case 8:t.t3=t.sent,(0,t.t2)(t.t3);case 10:case"end":return t.stop()}}),t)})))()})).catch((function(e){return Object(f.a)(l.a.mark((function n(){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=P,n.next=3,t("".concat(e.response.data.error));case 3:n.t1=n.sent,(0,n.t0)(n.t1);case 5:case"end":return n.stop()}}),n)})))()}));case 19:case"end":return n.stop()}}),n,null,[[5,9]])})))(),w(""),S("")},nameChange:function(e){w(e.target.value)},numberChange:function(e){S(e.target.value)},name:E,number:C}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(d,{show:U,delFunc:z}))};u.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(k,null)),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.03173e2a.chunk.js.map